# Copilot Instructions

## Project Overview

**Mergington High School Activities API** is a FastAPI-based full-stack web application for managing extracurricular activities. The application allows students to browse activities and sign up via a web interface backed by a simple in-memory REST API.

## Architecture

- **Backend**: FastAPI server (`src/app.py`) serving REST API endpoints and static files
- **Frontend**: Vanilla HTML/CSS/JavaScript (`src/static/`) with no build process
- **Data Storage**: In-memory dictionary (non-persistent; resets on server restart)
- **API Documentation**: Auto-generated by FastAPI at `/docs` (Swagger) and `/redoc`

## Key Components

### Backend (src/app.py)
- Single `activities` dictionary stores all activity data: name â†’ {description, schedule, max_participants, participants}
- **GET /activities**: Returns all activities with participant counts
- **POST /activities/{activity_name}/signup**: Adds email to activity's participants list
- **GET /**: Redirects to static HTML frontend
- Static files mounted at `/static` route

### Frontend (src/static/)
- **index.html**: Two-section layout - activities list + signup form
- **app.js**: Fetches activities on load, populates dropdown/cards, handles form submission with success/error messaging
- **styles.css**: Responsive design with flexbox, school colors (#1a237e navy)

## Developer Workflows

### Running the Application
```bash
# Install dependencies
pip install -r requirements.txt

# Start server (development)
cd src && python app.py
```
- Server runs on http://localhost:8000
- Access UI at http://localhost:8000/ (auto-redirects to /static/index.html)
- View API docs at http://localhost:8000/docs

### Testing
```bash
# pytest.ini configured with pythonpath = . for imports from root
pytest
```

## Project-Specific Patterns

### Data Model Conventions
- Activities identified by name (string key), not numeric ID
- Participants stored as email list directly in activity object (no separate Student objects despite README mentioning them)
- No validation on signup (duplicate signups allowed, capacity not enforced)

### Frontend-API Communication
- Fetch calls use `encodeURIComponent()` for activity names in URLs (handles special characters in "Programming Class", etc.)
- API returns plain JSON; frontend renders into DOM directly
- Error handling displays API `detail` field or generic message
- Message div uses CSS class toggle pattern (`.hidden` class for visibility)

### Development Considerations
- **No data persistence**: All changes lost on server restart (intentional for learning project)
- **Minimal validation**: Signup doesn't check duplicate emails or capacity - scope for improvement
- **Static files first-class**: No build step; frontend changes require server restart to reload

## Common Tasks

### Adding a New Activity
Edit `activities` dict in `src/app.py` with new entry following existing structure.

### Modifying API Endpoints
FastAPI auto-validates request/response types. Use type hints in function signatures and docstrings.

### Updating Frontend UI
Edit `src/static/index.html` (structure) or `app.js` (behavior/fetch logic) or `styles.css` (appearance). Changes visible after server restart.

## Dependencies
- `fastapi`: Web framework with auto-generated API documentation
- `uvicorn`: ASGI server for FastAPI
- No frontend dependencies (vanilla JS, no npm/webpack)
